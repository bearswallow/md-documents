主要从下面三个方面进行阐述

# 开销方面

创建、销毁线程都是开销较大的操作，所以要尽量避免产生这样的操作。

- 针对独立长期运行的线程可以单独启动一个线程（也可以通过固定一个线程的线程池来提供额外的功能）。
- 针对短期并发执行的线程一定要通过线程池来运行。

使用线程池的好处

- 避免创建、销毁线程的操作带来的开销。
- 能够合理的发挥多核处理器的并发能力而不会因为过多的线程导致线程调度切换的开销。
- 可以将任务的提交过程和执行过程解耦。
- 可以提供统计信息收集、应用程序管理机制和性能监视等机制。

使用线程池需要解决的问题

- 使用线程池需要合理设置核心线程数和最大线程数。

# 同步方面

![内存模型](E:\git-local\own\md-documents\面试\assets\内存模型.jpg)

每个 Java 线程都有自己的工作内存，它执行的所有操作都是基于工作内存的，当需要的数据不在工作内存中时就会从主内存中加载，但是工作内存中的数据什么时候保存到主内存中并不能确定。

## 可见性

可以通过 `volatile` 关键字来实现内存可见性。因为它会在所有读写操作中加入内存屏障。

- 读取 `volatile` 关键字修饰的变量时会从主内存加载数据。
- 修改 `volatile` 关键字修饰的变量时会将修改结果马上写入主内存。

当多个线程不需要同步访问某个资源时可以使用 `volatile` 变量。

## 同步

当多个线程需要同步访问某个资源时就需要对共享资源加锁。

提高性能的方式

- 减小锁的粒度。
- 缩短加锁时间，在加锁期间只执行必要的操作。

# 取消机制

对于长时间执行的线程需要提供相应的取消机制。

- 响应 `InterruptException`。
- 提供设置状态变量（使用 `volatile` 修饰）的方法。

线程可以选择在合适的时候结束自身。